# ğŸ§­ Tripmind Frontend

The frontend application for Tripmind - a Next.js PWA for trip planning with offline-first capabilities.

## ğŸ—ï¸ Architecture

Built with **Next.js 14** using the App Router architecture for modern React development:

```
frontend/src/
â”œâ”€â”€ app/                    # Next.js App Router pages
â”‚   â”œâ”€â”€ page.tsx           # Homepage (landing page)
â”‚   â”œâ”€â”€ trips/             # Trip listing page
â”‚   â”œâ”€â”€ trip/[id]/         # Individual trip pages
â”‚   â”‚   â”œâ”€â”€ timeline/      # Timeline view with activities
â”‚   â”‚   â””â”€â”€ wallet/        # Trip file management
â”‚   â””â”€â”€ settings/          # User settings and preferences
â”œâ”€â”€ components/            # Reusable React components
â”‚   â”œâ”€â”€ ui/               # shadcn/ui components
â”‚   â”œâ”€â”€ forms/            # Form components
â”‚   â””â”€â”€ features/         # Feature-specific components
â”œâ”€â”€ lib/                  # Frontend utilities and configurations
â”‚   â”œâ”€â”€ utils.ts          # Helper utilities (shadcn/ui)
â”‚   â”œâ”€â”€ stores/           # Zustand state management
â”‚   â”œâ”€â”€ db/               # IndexedDB (Dexie) setup
â”‚   â””â”€â”€ supabase/         # Supabase client configuration
â”œâ”€â”€ hooks/                # Custom React hooks
â””â”€â”€ types/                # TypeScript type definitions
```

## ğŸš€ Getting Started

### Prerequisites
- Node.js 18+
- pnpm (recommended)

### Development Setup

```bash
# From frontend directory
cd frontend

# Install dependencies
pnpm install

# Start development server
pnpm dev

# The app will be available at http://localhost:3000
```

### Available Scripts

| Command | Description |
|---------|-------------|
| `pnpm dev` | Start development server with hot reload |
| `pnpm build` | Build for production |
| `pnpm start` | Start production server |
| `pnpm lint` | Run ESLint |

## ğŸ”§ Tech Stack

### Core Framework
- **Next.js 14** - React framework with App Router
- **React 18** - UI library with concurrent features
- **TypeScript** - Type safety and developer experience

### Styling & UI
- **TailwindCSS** - Utility-first CSS framework
- **shadcn/ui** - High-quality component library
- **Lucide React** - Beautiful icon library

### State & Data Management
- **Zustand** - Lightweight state management
- **Dexie** - IndexedDB wrapper for offline storage
- **@supabase/supabase-js** - Supabase client for backend integration

### PWA & Performance
- **next-pwa** - Progressive Web App capabilities
- **Service Worker** - Offline functionality and caching
- **Turbopack** - Fast bundler for development

### Maps & Visualization
- **Mapbox GL JS** - Interactive maps for activity visualization

## ğŸ“± Progressive Web App (PWA)

The app is configured as a PWA with:
- **Offline Support** - Works without internet connection
- **Installable** - Can be installed on devices like a native app
- **Service Worker** - Background sync and caching
- **Web App Manifest** - App metadata and icons

### PWA Configuration
- Manifest: `public/manifest.json`
- Service Worker: Auto-generated by next-pwa
- Configuration: `next.config.ts`

## ğŸ¨ Styling Guidelines

### TailwindCSS
- Use utility classes for styling
- Custom components in `src/components/ui/`
- Theme configuration in `tailwind.config.ts`

### Dark Mode Support
- System preference detection
- Manual toggle in settings (future feature)
- Consistent theme across all components

### Component Structure
```tsx
// Example component structure
import { cn } from "@/lib/utils"

interface ComponentProps {
  className?: string
  // other props
}

export function Component({ className, ...props }: ComponentProps) {
  return (
    <div className={cn("base-styles", className)} {...props}>
      {/* component content */}
    </div>
  )
}
```

## ğŸ”„ State Management

### Zustand Stores
- **Trip Store** - Trip data and operations
- **Activity Store** - Timeline activities
- **Sync Store** - Offline sync queue
- **UI Store** - Application UI state

### Offline-First Pattern
1. **Optimistic Updates** - UI updates immediately
2. **Local Storage** - Changes saved to IndexedDB
3. **Sync Queue** - Failed operations queued for retry
4. **Background Sync** - Automatic sync when online

## ğŸ—‚ï¸ File Organization

### Page Components
- Keep pages simple and focused
- Extract logic into custom hooks
- Use server components when possible

### Reusable Components
- Place in `src/components/`
- Follow shadcn/ui patterns
- Include proper TypeScript interfaces

### Utilities
- Helper functions in `src/lib/utils.ts`
- Shared constants in `src/lib/constants.ts`
- Custom hooks in `src/hooks/`

## ğŸ”Œ API Integration

### Supabase Client
- Configuration in `src/lib/supabase/`
- Authentication helpers
- Real-time subscriptions
- File upload utilities

### Data Flow
```
User Action â†’ Zustand Store â†’ IndexedDB â†’ Sync Queue â†’ Supabase
                    â†“
            React Components â† Real-time Updates â† Supabase
```

## ğŸ§ª Development Guidelines

### Code Style
- Use TypeScript for all files
- Follow ESLint configuration
- Use Prettier for formatting (auto-configured)

### Component Development
- Start with shadcn/ui components
- Extend with custom styling using TailwindCSS
- Keep components small and focused
- Use composition over inheritance

### Performance
- Use React.memo() for expensive components
- Implement proper loading states
- Optimize images with Next.js Image component
- Lazy load non-critical components

## ğŸ” Debugging

### Development Tools
- **React DevTools** - Component inspection
- **Zustand DevTools** - State management debugging
- **Dexie DevTools** - IndexedDB inspection
- **Next.js DevTools** - Performance monitoring

### Common Issues
- **PWA not updating**: Clear browser cache and service worker
- **Styles not loading**: Check TailwindCSS configuration
- **TypeScript errors**: Ensure proper type imports from shared workspace

## ğŸ“¦ Build & Deployment

### Production Build
```bash
pnpm build
```

### Environment Variables
Copy `.env.local.example` to `.env.local` and configure:
- `NEXT_PUBLIC_SUPABASE_URL` - Supabase project URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Supabase anonymous key
- `NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN` - Mapbox API token

### Deployment Targets
- **Vercel** (recommended) - Automatic deployments
- **Static Export** - For other hosting providers
- **Docker** - Containerized deployment

---

**Part of the Tripmind monorepo** - See [root README](../README.md) for project overview.
